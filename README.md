# GophKeeper

GophKeeper представляет собой клиент-серверную систему, позволяющую пользователю надёжно и безопасно хранить логины, пароли, бинарные данные и прочую приватную информацию.

## Бизнес-логика

Сервер реализует следующую бизнес-логику:

- [ ] регистрация, аутентификация и авторизация пользователей;
- [ ] хранение приватных данных;
- [ ] синхронизация данных между несколькими авторизованными клиентами одного владельца;
- [ ] передача приватных данных владельцу по запросу.

Клиент реализует следующую бизнес-логику:

- [ ] аутентификация и авторизация пользователей на удалённом сервере;
- [ ] доступ к приватным данным по запросу.

Возможно будут реализованы дополнительные функции:

- [ ] создание, редактирование и удаление данных на стороне сервера или клиента;
- [ ] формат регистрации нового пользователя;
- [ ] выбор хранилища и формат хранения данных;
- [ ] обеспечение безопасности передачи и хранения данных;
- [ ] протокол взаимодействия клиента и сервера;
- [ ] механизмы аутентификации пользователя и авторизации доступа к информации.

### Типы хранимой информации

- [ ] пары логин/пароль;
- [ ] произвольные текстовые данные;
- [ ] произвольные бинарные данные;
- [ ] данные банковских карт.

Для любых данных предоставляется возможность хранения произвольной текстовой метаинформации (принадлежность данных к веб-сайту, личности или банку, списки одноразовых кодов активации и прочее).

### Абстрактная схема взаимодействия с системой

Ниже описаны базовые сценарии взаимодействия пользователя с системой. 

1. Для нового пользователя:
  - Пользователь получает клиент под необходимую ему платформу.
  - Пользователь проходит процедуру первичной регистрации.
  - Пользователь добавляет в клиент новые данные.
  - Клиент синхронизирует данные с сервером.

2. Для существующего пользователя:
  - Пользователь получает клиент под необходимую ему платформу.
  - Пользователь проходит процедуру аутентификации.
  - Клиент синхронизирует данные с сервером.
  - Пользователь запрашивает данные.
  - Клиент отображает данные для пользователя.

## Схема данных 

Схема отображена [тут](https://dbdiagram.io/d/gophkeeper-654cdf347d8bbd6465d9df6b)

## API

/ - страница, с которой можно скачать актуальные версии клиента под 3 платформы
/login - авторизация пользователя (Логин + Пароль, в ответ получает JWT-token Authorization)
/register - страница для регистрации пользователей
/api/v1/data - основная точка входа для работы с данными
    - GET - Получение данных, в ответ возвращаются все данные данного пользователя, в виде одного batch'a.
    - POST - Запись данных, в batch'e передаются данные, которые будут добавлены в БД, этим запясм автоматически присваивается id
    - PATCH - Изменение данных, в batch'e передаётся json с данными, которые нужно изменить, данные ищутся по полю id и изменяются
    - DELETE - Удаление данных, в batch'e передаются id записей, если запись принадлежит пользователю, то она удаляется.

## TODO
Подключить TLS сертификаты для сервера
Продумать базовую настройку для клиента (логирование в файл, транспорт для подключения к серверу, доверенный сертификат из хранилища сервера)
Обрисовать примерный flow работы пользователя в программе-клиенте, с тем какие кнопки надо жать, как это будет выглядеть, какие есть слои/структуры для хранения данных пользователя на клиенте.


При запросе на главной странице сервера надо отдавать 3 кнопки с возможностью скачать клиента под 3 основных архитектуры.

При запуске (клиенты должны компилиться сервером?), в клиент должен быть вшит конфиг с адресом сервера, сертификат сервера.

## Client flow

1. Запуск: ввод адреса хранилища, затем регистрация/вход на выбор(result bubbleTea)
2. Регистрация: 2 поля ввода логин + пароль, после чего -> Главное меню
3. Вход: 2 поля ввода логин + пароль, если пароль неправильный, то ошибка и повторный ввод. При верном пароле -> Главное меню
4. Главное меню: Список всех данных пользователя, с возможностью перемещаться вверх и вниз. Используем Table или paginator из bubbleTea
  - Кнопка Enter - вводится на весь экран информация о данной записи
  - Кнопка e/E(Edit), даже в режиме просмотра записи - включается режим изменения данных с последовательным вводом данных (description, value).
      Для ввода используем Text Input'ы (Credit Card Form) c последовательным вводом полей, при вводе поле заполняется текущим значением
  - Кнопка a/A(Add), добавляет записи в список, предлагается ввод как и при изменении
  - Кнопка s/S(Save), сохраняет изменения на сервере, заново запрашивает данные с сервера



